{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\n//登录接口\nimport { loginApi } from \"@/api/getData.js\";\nexport default {\n  data: function data() {\n    return {\n      model: {\n        phoneValue: \"\",\n        pwdValue: \"\"\n      },\n      fields: [{\n        type: \"input\",\n        modelKey: \"phoneValue\",\n        label: \"手机号\",\n        props: {\n          placeholder: \"请输入手机\"\n        },\n        rules: {\n          required: true\n        },\n        messages: {\n          required: \"手机号不能为空\"\n        }\n      }, {\n        type: \"input\",\n        modelKey: \"pwdValue\",\n        label: \"密码\",\n        props: {\n          placeholder: \"请输入密码\",\n          type: \"password\",\n          eye: {\n            open: false\n          }\n        },\n        rules: {\n          required: true\n        },\n        messages: {\n          required: \"密码不能为空\"\n        }\n      }]\n    };\n  },\n  methods: {\n    submitHandler: function submitHandler(e, model) {\n      var _this = this;\n      e.preventDefault();\n      //调用注册接口\n      loginApi(model.phoneValue, model.pwdValue).then(function (res) {\n        if (res.data.code === 0) {\n          //登录成功，跳转到个人中心\n          localStorage.setItem('token', res.data.data);\n          _this.$store.dispatch('setToken', res.data.data);\n\n          //跳转页面, 根据业务需要\n          _this.$router.push({\n            path: '/personal'\n          });\n        } else {\n          var toast = _this.$createToast({\n            txt: \"登录失败\",\n            type: \"error\",\n            time: 1500\n          });\n          toast.show();\n        }\n      });\n    }\n  }\n};","map":{"version":3,"names":["loginApi","data","model","phoneValue","pwdValue","fields","type","modelKey","label","props","placeholder","rules","required","messages","eye","open","methods","submitHandler","e","_this","preventDefault","then","res","code","localStorage","setItem","$store","dispatch","$router","push","path","toast","$createToast","txt","time","show"],"sources":["src/views/Login/Login.vue"],"sourcesContent":["<template>\n  <div class=\"main\">\n    <cube-form :model=\"model\" @submit=\"submitHandler\">\n      \n      <cube-form-group>\n       \n        <!--手机号-->\n        <cube-form-item :field=\"fields[0]\"></cube-form-item>\n        <!--密码-->\n        <cube-form-item :field=\"fields[1]\"></cube-form-item>\n      </cube-form-group>\n\n      <cube-form-group>\n        <cube-button type=\"submit\">登录</cube-button>\n      </cube-form-group>\n\n    </cube-form>\n    <router-link to=\"/register\" class=\"reg\">注册</router-link> \n  </div>\n</template>\n\n<script>\n//登录接口\nimport { loginApi } from \"@/api/getData.js\";\nexport default {\n  data() {\n    return {\n      model: {\n        phoneValue: \"\",\n        pwdValue: \"\"\n      },\n      fields: [\n        {\n          type: \"input\",\n          modelKey: \"phoneValue\",\n          label: \"手机号\",\n          props: {\n            placeholder: \"请输入手机\"\n          },\n          rules: {\n            required: true\n          },\n          messages: {\n            required: \"手机号不能为空\"\n          }\n        },\n        {\n          type: \"input\",\n          modelKey: \"pwdValue\",\n          label: \"密码\",\n          props: {\n            placeholder: \"请输入密码\",\n            type: \"password\",\n            eye: {\n              open: false\n            }\n          },\n          rules: {\n            required: true\n          },\n          messages: {\n            required: \"密码不能为空\"\n          }\n        }\n      ]\n    };\n  },\n  methods: {\n    submitHandler(e, model) {\n      e.preventDefault();\n      //调用注册接口\n      loginApi(model.phoneValue, model.pwdValue).then(\n        res => {\n          if (res.data.code === 0) {\n            //登录成功，跳转到个人中心\n            localStorage.setItem('token',res.data.data)\n            \n            this.$store.dispatch('setToken',res.data.data)\n\n            //跳转页面, 根据业务需要\n            this.$router.push({path:'/personal'})\n\n          }else{\n             const toast = this.$createToast({\n              txt: \"登录失败\",\n              type: \"error\",\n              time: 1500\n            });\n            toast.show();\n          }\n        }\n      );\n    }\n  }\n};\n</script>\n<style lang=\"scss\" scoped>\n.main {\n  padding: 50px 5% 0;\n  text-align: center;\n}\n// 登录\n.cube-btn {\n  margin-top: 20px;\n}\n//注册\n.reg {\n  display: inline-block;\n  margin-top: 30px;\n  font-size: 18px;\n}\n</style>"],"mappings":";AAsBA;AACA,SAAAA,QAAA;AACA;EACAC,IAAA,WAAAA,KAAA;IACA;MACAC,KAAA;QACAC,UAAA;QACAC,QAAA;MACA;MACAC,MAAA,GACA;QACAC,IAAA;QACAC,QAAA;QACAC,KAAA;QACAC,KAAA;UACAC,WAAA;QACA;QACAC,KAAA;UACAC,QAAA;QACA;QACAC,QAAA;UACAD,QAAA;QACA;MACA,GACA;QACAN,IAAA;QACAC,QAAA;QACAC,KAAA;QACAC,KAAA;UACAC,WAAA;UACAJ,IAAA;UACAQ,GAAA;YACAC,IAAA;UACA;QACA;QACAJ,KAAA;UACAC,QAAA;QACA;QACAC,QAAA;UACAD,QAAA;QACA;MACA;IAEA;EACA;EACAI,OAAA;IACAC,aAAA,WAAAA,cAAAC,CAAA,EAAAhB,KAAA;MAAA,IAAAiB,KAAA;MACAD,CAAA,CAAAE,cAAA;MACA;MACApB,QAAA,CAAAE,KAAA,CAAAC,UAAA,EAAAD,KAAA,CAAAE,QAAA,EAAAiB,IAAA,CACA,UAAAC,GAAA;QACA,IAAAA,GAAA,CAAArB,IAAA,CAAAsB,IAAA;UACA;UACAC,YAAA,CAAAC,OAAA,UAAAH,GAAA,CAAArB,IAAA,CAAAA,IAAA;UAEAkB,KAAA,CAAAO,MAAA,CAAAC,QAAA,aAAAL,GAAA,CAAArB,IAAA,CAAAA,IAAA;;UAEA;UACAkB,KAAA,CAAAS,OAAA,CAAAC,IAAA;YAAAC,IAAA;UAAA;QAEA;UACA,IAAAC,KAAA,GAAAZ,KAAA,CAAAa,YAAA;YACAC,GAAA;YACA3B,IAAA;YACA4B,IAAA;UACA;UACAH,KAAA,CAAAI,IAAA;QACA;MACA,CACA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}