{"ast":null,"code":"import { STATUS_SUCCESS, STATUS_ERROR } from './util';\nvar COMPONENT_NAME = 'cube-upload-file';\nvar STATUS_CLASS_MAP = {\n  success: 'cubeic-right',\n  error: 'cubeic-warn'\n};\nvar EVENT_CLICK = 'click';\nexport default {\n  name: COMPONENT_NAME,\n  props: {\n    file: {\n      type: Object,\n      required: true\n    }\n  },\n  computed: {\n    fileCls: function fileCls() {\n      return \"cube-upload-file_\".concat(this.file.status);\n    },\n    fileStatusCls: function fileStatusCls() {\n      var file = this.file;\n      var status = file.status;\n      if (file.progress >= 0.01 || status === STATUS_SUCCESS || status === STATUS_ERROR) {\n        return 'cube-upload-file_stat';\n      }\n    },\n    fileStyle: function fileStyle() {\n      var url = this.file.url || this.file.base64;\n      if (!url) {\n        return;\n      }\n      return {\n        'background-image': \"url(\\\"\".concat(url, \"\\\")\")\n      };\n    },\n    statusCls: function statusCls() {\n      var status = this.file.status;\n      return STATUS_CLASS_MAP[status];\n    },\n    fileProgress: function fileProgress() {\n      if (this.statusCls) {\n        return '100%';\n      }\n      var p = Math.min(Math.floor(this.file.progress * 100), 99);\n      return \"\".concat(p, \"%\");\n    }\n  },\n  methods: {\n    clickHandler: function clickHandler() {\n      this.$emit(EVENT_CLICK, this.file);\n    },\n    removeFile: function removeFile() {\n      this.$parent.removeFile(this.file);\n    }\n  }\n};","map":{"version":3,"names":["STATUS_SUCCESS","STATUS_ERROR","COMPONENT_NAME","STATUS_CLASS_MAP","success","error","EVENT_CLICK","name","props","file","type","Object","required","computed","fileCls","concat","status","fileStatusCls","progress","fileStyle","url","base64","statusCls","fileProgress","p","Math","min","floor","methods","clickHandler","$emit","removeFile","$parent"],"sources":["node_modules/cube-ui/src/components/upload/file.vue"],"sourcesContent":["<template>\n  <div class=\"cube-upload-file\" :class=\"fileCls\" @click=\"clickHandler\">\n    <slot\n      :img-style=\"fileStyle\"\n      :progress=\"fileProgress\"\n    >\n      <div class=\"cube-upload-file-def\" :style=\"fileStyle\">\n        <i class=\"cubeic-wrong\" @click.stop=\"removeFile\"></i>\n        <div class=\"cube-upload-file-state\" :class=\"fileStatusCls\">\n          <i class=\"cube-upload-file-status\" :class=\"statusCls\"></i>\n          <span class=\"cube-upload-file-progress\">{{fileProgress}}</span>\n        </div>\n      </div>\n    </slot>\n  </div>\n</template>\n<script type=\"text/ecmascript-6\">\n  import { STATUS_SUCCESS, STATUS_ERROR } from './util'\n\n  const COMPONENT_NAME = 'cube-upload-file'\n  const STATUS_CLASS_MAP = {\n    success: 'cubeic-right',\n    error: 'cubeic-warn'\n  }\n  const EVENT_CLICK = 'click'\n\n  export default {\n    name: COMPONENT_NAME,\n    props: {\n      file: {\n        type: Object,\n        required: true\n      }\n    },\n    computed: {\n      fileCls() {\n        return `cube-upload-file_${this.file.status}`\n      },\n      fileStatusCls() {\n        const file = this.file\n        const status = file.status\n        if (file.progress >= 0.01 || status === STATUS_SUCCESS || status === STATUS_ERROR) {\n          return 'cube-upload-file_stat'\n        }\n      },\n      fileStyle() {\n        const url = this.file.url || this.file.base64\n        if (!url) {\n          return\n        }\n        return {\n          'background-image': `url(\"${url}\")`\n        }\n      },\n      statusCls() {\n        const status = this.file.status\n        return STATUS_CLASS_MAP[status]\n      },\n      fileProgress() {\n        if (this.statusCls) {\n          return '100%'\n        }\n        const p = Math.min(Math.floor(this.file.progress * 100), 99)\n        return `${p}%`\n      }\n    },\n    methods: {\n      clickHandler() {\n        this.$emit(EVENT_CLICK, this.file)\n      },\n      removeFile() {\n        this.$parent.removeFile(this.file)\n      }\n    }\n  }\n</script>\n<style lang=\"stylus\" rel=\"stylesheet/stylus\">\n  @require \"../../common/stylus/variable.styl\"\n  @require \"../../common/stylus/mixin.styl\"\n  .cube-upload-file\n    position: relative\n\n  .cube-upload-file-def\n    position: relative\n    width: 80px\n    height: 80px\n    box-sizing: border-box\n    background: $upload-file-bgc no-repeat center\n    background-size: cover\n    border-radius: 2px\n    > .cubeic-wrong\n      position: absolute\n      z-index: 2\n      top: -2px\n      right: -2px\n      color: $upload-file-remove-color\n      font-size: $fontsize-large\n      background-color: $upload-file-remove-bgc\n      border-radius: 50%\n      &::before\n        display: inline-block\n        transform: scale(1.625)\n        transform-origin: center\n\n  .cube-upload-file-state\n    position: relative\n    width: 100%\n    height: 100%\n    display: flex\n    align-items: center\n    justify-content: center\n    overflow: hidden\n    opacity: 0\n    background-color: $upload-file-state-bgc\n    border-radius: 2px\n    transition: opacity .1s\n    &::before\n      content: \".\"\n      position: relative\n      left: -50%\n      display: block\n      width: 1px\n      height: 1px\n      margin-left: -1px\n      background-color: rgba(0, 0, 0, .1)\n\n  .cube-upload-file_stat\n    opacity: 1\n\n  .cube-upload-file-status\n    position: relative\n    z-index: 1\n    font-size: $fontsize-large-xxxx\n    display: none\n\n  .cube-upload-file-status.cubeic-right\n    display: block\n    color: $upload-file-success-color\n\n  .cube-upload-file-status.cubeic-warn\n    display: block\n    color: $upload-file-error-color\n\n  .cube-upload-file-status.cubeic-right, .cube-upload-file-status.cubeic-warn\n    &::after\n      content: \"\"\n      z-index: -1\n      position: absolute\n      left: 50%\n      top: 50%\n      transform: translate(-50%, -50%)\n      width: .56em\n      height: .56em\n      border-radius: 50%\n      background-color: $upload-file-status-bgc\n    + .cube-upload-file-progress\n        display: none\n\n  .cube-upload-file-progress\n    color: $upload-file-progress-color\n    font-size: $fontsize-large-xx\n</style>\n"],"mappings":"AAiBA,SAAAA,cAAA,EAAAC,YAAA;AAEA,IAAAC,cAAA;AACA,IAAAC,gBAAA;EACAC,OAAA;EACAC,KAAA;AACA;AACA,IAAAC,WAAA;AAEA;EACAC,IAAA,EAAAL,cAAA;EACAM,KAAA;IACAC,IAAA;MACAC,IAAA,EAAAC,MAAA;MACAC,QAAA;IACA;EACA;EACAC,QAAA;IACAC,OAAA,WAAAA,QAAA;MACA,2BAAAC,MAAA,MAAAN,IAAA,CAAAO,MAAA;IACA;IACAC,aAAA,WAAAA,cAAA;MACA,IAAAR,IAAA,QAAAA,IAAA;MACA,IAAAO,MAAA,GAAAP,IAAA,CAAAO,MAAA;MACA,IAAAP,IAAA,CAAAS,QAAA,YAAAF,MAAA,KAAAhB,cAAA,IAAAgB,MAAA,KAAAf,YAAA;QACA;MACA;IACA;IACAkB,SAAA,WAAAA,UAAA;MACA,IAAAC,GAAA,QAAAX,IAAA,CAAAW,GAAA,SAAAX,IAAA,CAAAY,MAAA;MACA,KAAAD,GAAA;QACA;MACA;MACA;QACA,6BAAAL,MAAA,CAAAK,GAAA;MACA;IACA;IACAE,SAAA,WAAAA,UAAA;MACA,IAAAN,MAAA,QAAAP,IAAA,CAAAO,MAAA;MACA,OAAAb,gBAAA,CAAAa,MAAA;IACA;IACAO,YAAA,WAAAA,aAAA;MACA,SAAAD,SAAA;QACA;MACA;MACA,IAAAE,CAAA,GAAAC,IAAA,CAAAC,GAAA,CAAAD,IAAA,CAAAE,KAAA,MAAAlB,IAAA,CAAAS,QAAA;MACA,UAAAH,MAAA,CAAAS,CAAA;IACA;EACA;EACAI,OAAA;IACAC,YAAA,WAAAA,aAAA;MACA,KAAAC,KAAA,CAAAxB,WAAA,OAAAG,IAAA;IACA;IACAsB,UAAA,WAAAA,WAAA;MACA,KAAAC,OAAA,CAAAD,UAAA,MAAAtB,IAAA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}