{"ast":null,"code":"import \"core-js/modules/es.array.concat.js\";\nimport visibilityMixin from '../../common/mixins/visibility';\nimport popupMixin from '../../common/mixins/popup';\nimport pickerMixin from '../../common/mixins/picker';\nimport localeMixin from '../../common/mixins/locale';\nvar COMPONENT_NAME = 'cube-segment-picker';\nvar EVENT_NEXT = 'next';\nvar EVENT_PREV = 'prev';\nvar EVENT_SELECT = 'select';\nvar EVENT_CANCEL = 'cancel';\nvar EVENT_CHANGE = 'change';\nexport default {\n  name: COMPONENT_NAME,\n  mixins: [visibilityMixin, popupMixin, pickerMixin, localeMixin],\n  props: {\n    data: {\n      type: Array,\n      \"default\": function _default() {\n        return [];\n      }\n    },\n    nextTxt: {\n      type: String,\n      \"default\": ''\n    },\n    prevTxt: {\n      type: String,\n      \"default\": ''\n    }\n  },\n  data: function data() {\n    return {\n      current: 0,\n      selectedVal: [],\n      selectedIndex: [],\n      selectedText: []\n    };\n  },\n  computed: {\n    currentPicker: function currentPicker() {\n      // $refs is not reactive, should not use to computed or watch, so we import this.data to responsive.\n      for (var i = 0; i < this.data.length; i++) {\n        var item = this.$refs.pickers[i];\n        if (item.$attrs.index === this.current) {\n          return item;\n        }\n      }\n    },\n    _nextTxt: function _nextTxt() {\n      return this.nextTxt || this.$t('next');\n    },\n    _prevTxt: function _prevTxt() {\n      return this.prevTxt || this.$t('prev');\n    }\n  },\n  watch: {\n    data: function data() {\n      this.current = 0;\n      this.selectedVal = [];\n      this.selectedIndex = [];\n      this.selectedText = [];\n    }\n  },\n  methods: {\n    show: function show() {\n      if (this.isVisible || !this.data.length) {\n        return;\n      }\n      this.isVisible = true;\n      this.currentPicker.show();\n    },\n    hide: function hide() {\n      if (!this.isVisible || !this.data.length) {\n        return;\n      }\n      this.isVisible = false;\n      this.currentPicker.hide();\n    },\n    _select: function _select() {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n      this.selectedVal[this.current] = args[0];\n      this.selectedIndex[this.current] = args[1];\n      this.selectedText[this.current] = args[2];\n      if (this.current < this.data.length - 1) {\n        this.$emit.apply(this, [EVENT_NEXT, this.current].concat(args));\n        this.current++;\n        this.currentPicker.show();\n      } else {\n        this.isVisible = false;\n        this.$emit(EVENT_SELECT, this.selectedVal, this.selectedIndex, this.selectedText);\n        this.current = 0;\n      }\n    },\n    _cancel: function _cancel() {\n      if (this.current > 0) {\n        for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n          args[_key2] = arguments[_key2];\n        }\n        this.$emit.apply(this, [EVENT_PREV, this.current].concat(args));\n        this.current--;\n        this.currentPicker.show();\n      } else {\n        this.isVisible = false;\n        this.$emit(EVENT_CANCEL);\n      }\n    },\n    _change: function _change() {\n      for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n        args[_key3] = arguments[_key3];\n      }\n      this.$emit.apply(this, [EVENT_CHANGE, this.current].concat(args));\n    }\n  }\n};","map":{"version":3,"names":["visibilityMixin","popupMixin","pickerMixin","localeMixin","COMPONENT_NAME","EVENT_NEXT","EVENT_PREV","EVENT_SELECT","EVENT_CANCEL","EVENT_CHANGE","name","mixins","props","data","type","Array","_default","nextTxt","String","prevTxt","current","selectedVal","selectedIndex","selectedText","computed","currentPicker","i","length","item","$refs","pickers","$attrs","index","_nextTxt","$t","_prevTxt","watch","methods","show","isVisible","hide","_select","_len","arguments","args","_key","$emit","apply","concat","_cancel","_len2","_key2","_change","_len3","_key3"],"sources":["node_modules/cube-ui/src/components/segment-picker/segment-picker.vue"],"sourcesContent":["<template>\n  <div class=\"cube-segment-picker\">\n    <!-- Direct props will recover the property from v-bind Object expect 'is'. -->\n    <!-- To ensure the priority of v-bind Object which is from user configure, we check the property of item in every prop. -->\n    <component\n      v-for=\"(item, index) in data\"\n      :key=\"index\"\n      :index=\"index\"\n      ref=\"pickers\"\n      :is=\"item.is || 'cube-picker'\"\n      :title=\"item.title || title\"\n      :subtitle=\"item.subtitle || subtitle\"\n      :confirm-txt=\"item.confirmTxt || (index === data.length - 1 ? _confirmTxt : _nextTxt)\"\n      :cancel-txt=\"item.cancelTxt || (index === 0 ? _cancelTxt : _prevTxt)\"\n      :swipe-time=\"item.swipeTime || swipeTime\"\n      :z-index=\"item.zIndex || zIndex\"\n      :mask-closable=\"maskClosable\"\n      v-bind=\"item\"\n      @select=\"_select\"\n      @cancel=\"_cancel\"\n      @change=\"_change\">\n    </component>\n  </div>\n</template>\n\n<script>\n  import visibilityMixin from '../../common/mixins/visibility'\n  import popupMixin from '../../common/mixins/popup'\n  import pickerMixin from '../../common/mixins/picker'\n  import localeMixin from '../../common/mixins/locale'\n\n  const COMPONENT_NAME = 'cube-segment-picker'\n  const EVENT_NEXT = 'next'\n  const EVENT_PREV = 'prev'\n  const EVENT_SELECT = 'select'\n  const EVENT_CANCEL = 'cancel'\n  const EVENT_CHANGE = 'change'\n\n  export default {\n    name: COMPONENT_NAME,\n    mixins: [visibilityMixin, popupMixin, pickerMixin, localeMixin],\n    props: {\n      data: {\n        type: Array,\n        default() {\n          return []\n        }\n      },\n      nextTxt: {\n        type: String,\n        default: ''\n      },\n      prevTxt: {\n        type: String,\n        default: ''\n      }\n    },\n    data() {\n      return {\n        current: 0,\n        selectedVal: [],\n        selectedIndex: [],\n        selectedText: []\n      }\n    },\n    computed: {\n      currentPicker () {\n        // $refs is not reactive, should not use to computed or watch, so we import this.data to responsive.\n        for (let i = 0; i < this.data.length; i++) {\n          let item = this.$refs.pickers[i]\n          if (item.$attrs.index === this.current) {\n            return item\n          }\n        }\n      },\n      _nextTxt () {\n        return this.nextTxt || this.$t('next')\n      },\n      _prevTxt () {\n        return this.prevTxt || this.$t('prev')\n      }\n    },\n    watch: {\n      data() {\n        this.current = 0\n        this.selectedVal = []\n        this.selectedIndex = []\n        this.selectedText = []\n      }\n    },\n    methods: {\n      show() {\n        if (this.isVisible || !this.data.length) {\n          return\n        }\n        this.isVisible = true\n        this.currentPicker.show()\n      },\n      hide() {\n        if (!this.isVisible || !this.data.length) {\n          return\n        }\n        this.isVisible = false\n        this.currentPicker.hide()\n      },\n      _select(...args) {\n        this.selectedVal[this.current] = args[0]\n        this.selectedIndex[this.current] = args[1]\n        this.selectedText[this.current] = args[2]\n\n        if (this.current < this.data.length - 1) {\n          this.$emit(EVENT_NEXT, this.current, ...args)\n          this.current++\n          this.currentPicker.show()\n        } else {\n          this.isVisible = false\n          this.$emit(EVENT_SELECT, this.selectedVal, this.selectedIndex, this.selectedText)\n          this.current = 0\n        }\n      },\n      _cancel(...args) {\n        if (this.current > 0) {\n          this.$emit(EVENT_PREV, this.current, ...args)\n          this.current--\n          this.currentPicker.show()\n        } else {\n          this.isVisible = false\n          this.$emit(EVENT_CANCEL)\n        }\n      },\n      _change(...args) {\n        this.$emit(EVENT_CHANGE, this.current, ...args)\n      }\n    }\n  }\n</script>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}