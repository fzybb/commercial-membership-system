{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/fu_71/OneDrive/Desktop/fitness/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Users/fu_71/OneDrive/Desktop/fitness/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport CommonFooter from \"@/components/CommonFooter\";\nimport { getUserInfo } from \"@/api/getData.js\";\nimport defaultHeadImg from \"@/assets/logo.png\";\nexport default {\n  components: {\n    CommonFooter: CommonFooter\n  },\n  data: function data() {\n    return {\n      info: {},\n      defaultHeadImg: defaultHeadImg\n    };\n  },\n  computed: {\n    getToken: function getToken() {\n      return this.$store.state.token;\n    }\n  },\n  methods: {\n    //获取用户信息\n    getInfo: function getInfo() {\n      var _this = this;\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var result;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return getUserInfo(_this.getToken);\n            case 3:\n              result = _context.sent;\n              if (result.data.code === 0) {\n                _this.info = result.data.data;\n              }\n              _context.next = 10;\n              break;\n            case 7:\n              _context.prev = 7;\n              _context.t0 = _context[\"catch\"](0);\n              console.log(_context.t0);\n            case 10:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, null, [[0, 7]]);\n      }))();\n    },\n    //退出登录\n    signOut: function signOut() {\n      var _this2 = this;\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return _this2.$store.dispatch('clearToken');\n            case 2:\n              localStorage.removeItem(\"token\");\n\n              //刷新页面\n              location.reload();\n            case 4:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2);\n      }))();\n    }\n  },\n  mounted: function mounted() {\n    if (this.getToken) {\n      this.getInfo();\n    }\n  }\n};","map":{"version":3,"names":["CommonFooter","getUserInfo","defaultHeadImg","components","data","info","computed","getToken","$store","state","token","methods","getInfo","_this","_asyncToGenerator","_regeneratorRuntime","mark","_callee","result","wrap","_callee$","_context","prev","next","sent","code","t0","console","log","stop","signOut","_this2","_callee2","_callee2$","_context2","dispatch","localStorage","removeItem","location","reload","mounted"],"sources":["src/views/Personal/Personal.vue"],"sourcesContent":["<template>\n  <div>\n    <div class=\"container\">\n        <div class=\"p_top\">\n            <div>\n                <img :src='info.head_img || defaultHeadImg' alt=\"头像\"/>\n                <router-link to=\"/login\" v-if = \"getToken === ''\"> \n                <p>立刻登录</p>\n                </router-link>\n                <p v-else>{{info.name}} </p>\n            </div>\n        </div>\n        <button v-if=\"getToken !== ''\" class=\"green\" @click=\"signOut\">\n            退出登录\n        </button>\n    </div>\n    <common-footer></common-footer>\n  </div>\n</template>\n\n<script>\nimport CommonFooter from \"@/components/CommonFooter\";\nimport { getUserInfo } from \"@/api/getData.js\";\nimport defaultHeadImg from \"@/assets/logo.png\";\n\nexport default {\n  components: {\n    CommonFooter\n  },\n\n  data() {\n    return {\n      info: {},\n      defaultHeadImg: defaultHeadImg\n    };\n  },\n\n  computed: {\n    getToken() {\n      return this.$store.state.token;\n    }\n  },\n\n  methods: {\n    //获取用户信息\n    async getInfo() {\n      try {\n        const result = await getUserInfo(this.getToken);\n        if (result.data.code === 0) {\n          this.info = result.data.data;\n        }\n      } catch (error) {\n        console.log(error);\n      }\n    },\n\n    //退出登录\n    async signOut() {\n      //清除token\n      await this.$store.dispatch('clearToken');\n      localStorage.removeItem(\"token\");\n\n      //刷新页面\n      location.reload();\n    }\n  },\n\n  mounted() {\n    if (this.getToken) {\n      this.getInfo();\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.container {\n  // 顶部头像区域\n  .p_top {\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    padding: 20px 0;\n    background-color: #2c3f54;\n    div {\n      text-align: center;\n      img {\n        width: 60px;\n        height: 60px;\n        border-radius: 50px;\n      }\n      p {\n        font-size: 16px;\n        color: #fff;\n        margin-top: 10px;\n      }\n    }\n  }\n}\n// 退出登录\n.green {\n  display: block;\n  background-color: #3bb149;\n  border: none;\n  outline: none;\n  width: 80%;\n  height: 40px;\n  margin: 20px auto 0;\n  color: #fff;\n  border-radius: 20px;\n}\n</style>"],"mappings":";;AAqBA,OAAAA,YAAA;AACA,SAAAC,WAAA;AACA,OAAAC,cAAA;AAEA;EACAC,UAAA;IACAH,YAAA,EAAAA;EACA;EAEAI,IAAA,WAAAA,KAAA;IACA;MACAC,IAAA;MACAH,cAAA,EAAAA;IACA;EACA;EAEAI,QAAA;IACAC,QAAA,WAAAA,SAAA;MACA,YAAAC,MAAA,CAAAC,KAAA,CAAAC,KAAA;IACA;EACA;EAEAC,OAAA;IACA;IACAC,OAAA,WAAAA,QAAA;MAAA,IAAAC,KAAA;MAAA,OAAAC,iBAAA,eAAAC,mBAAA,GAAAC,IAAA,UAAAC,QAAA;QAAA,IAAAC,MAAA;QAAA,OAAAH,mBAAA,GAAAI,IAAA,UAAAC,SAAAC,QAAA;UAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;YAAA;cAAAF,QAAA,CAAAC,IAAA;cAAAD,QAAA,CAAAE,IAAA;cAAA,OAEAtB,WAAA,CAAAY,KAAA,CAAAN,QAAA;YAAA;cAAAW,MAAA,GAAAG,QAAA,CAAAG,IAAA;cACA,IAAAN,MAAA,CAAAd,IAAA,CAAAqB,IAAA;gBACAZ,KAAA,CAAAR,IAAA,GAAAa,MAAA,CAAAd,IAAA,CAAAA,IAAA;cACA;cAAAiB,QAAA,CAAAE,IAAA;cAAA;YAAA;cAAAF,QAAA,CAAAC,IAAA;cAAAD,QAAA,CAAAK,EAAA,GAAAL,QAAA;cAEAM,OAAA,CAAAC,GAAA,CAAAP,QAAA,CAAAK,EAAA;YAAA;YAAA;cAAA,OAAAL,QAAA,CAAAQ,IAAA;UAAA;QAAA,GAAAZ,OAAA;MAAA;IAEA;IAEA;IACAa,OAAA,WAAAA,QAAA;MAAA,IAAAC,MAAA;MAAA,OAAAjB,iBAAA,eAAAC,mBAAA,GAAAC,IAAA,UAAAgB,SAAA;QAAA,OAAAjB,mBAAA,GAAAI,IAAA,UAAAc,UAAAC,SAAA;UAAA,kBAAAA,SAAA,CAAAZ,IAAA,GAAAY,SAAA,CAAAX,IAAA;YAAA;cAAAW,SAAA,CAAAX,IAAA;cAAA,OAEAQ,MAAA,CAAAvB,MAAA,CAAA2B,QAAA;YAAA;cACAC,YAAA,CAAAC,UAAA;;cAEA;cACAC,QAAA,CAAAC,MAAA;YAAA;YAAA;cAAA,OAAAL,SAAA,CAAAL,IAAA;UAAA;QAAA,GAAAG,QAAA;MAAA;IACA;EACA;EAEAQ,OAAA,WAAAA,QAAA;IACA,SAAAjC,QAAA;MACA,KAAAK,OAAA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}